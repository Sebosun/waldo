(this.webpackJsonpwaldo=this.webpackJsonpwaldo||[]).push([[0],{25:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(4),s=a.n(n),i=a(19),c=a.n(i),o=(a(25),a(9)),r=a(17),d=a.n(r),l=a(20),u=a(12),b=a(13),j=a(8),h=a(15),m=a(14),f=(a(27),a(28),a(1)),O=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)("div",{children:this.props.text}),this.props.found?Object(f.jsxs)("div",{className:"characters",children:[this.props.found.waldo?Object(f.jsx)("div",{style:{textDecoration:"line-through"},children:"Waldo"}):Object(f.jsx)("div",{children:"Waldo"}),this.props.found.odlaw?Object(f.jsx)("div",{style:{textDecoration:"line-through"},children:"Odlaw"}):Object(f.jsx)("div",{children:"Odlaw"}),this.props.found.wizard?Object(f.jsx)("div",{style:{textDecoration:"line-through"},children:"Wizard"}):Object(f.jsx)("div",{children:"Wizard"})]}):null]})}}]),a}(s.a.Component),p=a(10);a(30);function v(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),s=a[0],i=a[1],c=Object(n.useState)([]),r=Object(p.a)(c,2),d=r[0],l=r[1],u=Object(n.useState)({position:"absolute",top:0,left:0}),b=Object(p.a)(u,2),j=b[0],h=b[1];return Object(n.useEffect)((function(){e.trackTime()}),[]),Object(f.jsxs)("div",{className:"gameContainer",children:[s?Object(f.jsxs)("div",{className:"dropMenu",style:j,children:[Object(f.jsx)("button",{onClick:function(t){i(!s),e.submitChoice(d,"Waldo")},children:"Waldo"}),Object(f.jsx)("button",{onClick:function(t){i(!s),e.submitChoice(d,"Odlaw")},children:"Odlaw"}),Object(f.jsx)("button",{onClick:function(t){i(!s),e.submitChoice(d,"Wizard")},children:"Wizard"})]}):null,Object(f.jsx)("div",{onClick:function(e){return function(e){console.log(e.pageY,e.pageX);var t=e.target.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top;console.log(n,a),l([n,a]),h(Object(o.a)(Object(o.a)({},j),{},{top:e.pageY,left:e.pageX})),i(!s)}(e)},children:Object(f.jsx)("img",{src:e.image,alt:"waldo"})})]})}a(31);function x(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),s=a[0],i=a[1],c=Object(n.useState)(!1),o=Object(p.a)(c,2),r=o[0],d=o[1];return Object(f.jsx)("div",{className:"winningScreen",children:r?Object(f.jsxs)("div",{className:"wonContainer",children:[Object(f.jsx)("div",{children:"Your score has been submitted!"}),Object(f.jsx)("button",{onClick:function(){e.stopGame(),e.showLeaderboards()},children:"Leaderboards"})]}):Object(f.jsxs)("div",{className:"wonContainer",children:[Object(f.jsx)("div",{children:"You won, congrats!"}),Object(f.jsxs)("div",{children:["You have finished in ",e.time," seconds !"]}),Object(f.jsx)("form",{onSubmit:function(t){return d(!0),e.addToLeaderboards(t,s)},children:Object(f.jsxs)("label",{children:["Submit your score!",Object(f.jsx)("br",{}),Object(f.jsx)("input",{placeholder:"Enter your nickname!",value:s,name:"name",type:"text",onChange:function(e){var t=e.target,a=(t.name,t.value);i(a)}}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{children:" Submit! "})]})})," "]})})}var w=a.p+"static/media/level-1.8b871ac1.jpg";var g=function(e,t,a){return e[0]>=t[0]-a&&e[0]<=t[0]+a&&(e[1]>=t[1]-a&&e[1]<=t[1]+a)},S=a(6);a(32);function k(e){var t=Object(n.useState)(null),a=Object(p.a)(t,2),s=a[0],i=a[1];return Object(n.useEffect)((function(){S.b.firestore().collection("leaderboards").orderBy("time","asc").limit(10).onSnapshot((function(e){var t=e.docChanges().map((function(e){return e.doc.data()}));i(t)}))}),[]),Object(f.jsxs)("div",{className:"leaderboards",children:[Object(f.jsx)("div",{className:"container",children:s?s.map((function(e,t){return Object(f.jsxs)("div",{className:"record",children:[Object(f.jsx)("div",{children:e.userName}),Object(f.jsxs)("div",{children:[e.time,"s"]})]},t)})):null}),Object(f.jsx)("button",{onClick:e.showLeaderboards,children:"Close"})]})}var C=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).trackTime=Object(l.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.b.firestore().collection("time-elapsed").add({userName:"",timestampStart:S.b.firestore.FieldValue.serverTimestamp(),timestampEnd:null});case 2:a=t.sent,e.setState({userId:a.id});case 4:case"end":return t.stop()}}),t)}))),e.componentDidMount=function(){S.b.firestore().collection("waldo").onSnapshot((function(t){var a=t.docs.map((function(e){return e.data()}));e.setState({positions:a})}))},e.checkWin=function(e){var t=[];for(var a in e)t.push(e[a]);return t.every((function(e){return e}))},e.state={positions:[],found:{waldo:!1,odlaw:!1,wizard:!1},won:!1,gameStarted:!1,showLeaderboards:!1,userId:null,time:null},e.submitChoice=e.submitChoice.bind(Object(j.a)(e)),e.trackTime=e.trackTime.bind(Object(j.a)(e)),e.checkWin=e.checkWin.bind(Object(j.a)(e)),e.calcTime=e.calcTime.bind(Object(j.a)(e)),e.addToLeaderboards=e.addToLeaderboards.bind(Object(j.a)(e)),e.showLeaderboards=e.showLeaderboards.bind(Object(j.a)(e)),e.stopGame=e.stopGame.bind(Object(j.a)(e)),e}return Object(b.a)(a,[{key:"submitChoice",value:function(e,t){"Waldo"===t?g(e,this.state.positions[0].waldo,40)&&this.setState((function(e){return{found:Object(o.a)(Object(o.a)({},e.found),{},{waldo:!0})}})):"Odlaw"===t?g(e,this.state.positions[0].odlaw,40)&&this.setState((function(e){return{found:Object(o.a)(Object(o.a)({},e.found),{},{odlaw:!0})}})):"Wizard"===t&&g(e,this.state.positions[0].wizard,40)&&this.setState((function(e){return{found:Object(o.a)(Object(o.a)({},e.found),{},{wizard:!0})}}))}},{key:"componentDidUpdate",value:function(){var e=this;this.checkWin(this.state.found)&&!0!==this.state.won&&(this.setState({won:!0}),S.b.firestore().collection("time-elapsed").doc(this.state.userId).update({timestampEnd:S.b.firestore.FieldValue.serverTimestamp()}).then((function(){return e.calcTime()})))}},{key:"calcTime",value:function(){var e=this;S.b.firestore().collection("time-elapsed").doc("".concat(this.state.userId)).get().then((function(t){console.log(t.data().timestampEnd);var a=t.data().timestampStart.seconds,n=new Date(1e3*a),s=t.data().timestampEnd.seconds,i=new Date(1e3*s)-n,c=t.data().timestampStart.nanoseconds,o=i/1e3+(t.data().timestampEnd.nanoseconds-c)/1e9;o=Math.floor(100*o)/100,e.setState({time:o})})).catch((function(e){console.log("Error getting time",e)}))}},{key:"addToLeaderboards",value:function(e,t){e.preventDefault(),S.b.firestore().collection("leaderboards").add({userName:t,time:this.state.time,userId:this.state.userId})}},{key:"showLeaderboards",value:function(){this.setState({showLeaderboards:!this.state.showLeaderboards})}},{key:"stopGame",value:function(){this.setState({gameStarted:!this.state.gameStarted})}},{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{className:"App",children:this.state.gameStarted?Object(f.jsxs)("div",{children:[Object(f.jsx)(O,{found:this.state.found,text:"Characters found: "}),this.state.won?Object(f.jsx)(x,{time:this.state.time,addToLeaderboards:this.addToLeaderboards,stopGame:this.stopGame,showLeaderboards:this.showLeaderboards}):null,Object(f.jsx)(v,{trackTime:this.trackTime,submitChoice:this.submitChoice,image:w})]}):this.state.showLeaderboards?Object(f.jsxs)("div",{children:[" ",Object(f.jsx)(O,{text:"Leaderboards"}),Object(f.jsx)(k,{showLeaderboards:this.showLeaderboards})]}):Object(f.jsxs)("div",{children:[Object(f.jsx)(O,{text:"Waldo Game"}),Object(f.jsxs)("div",{className:"mainMenu",children:[Object(f.jsxs)("button",{onClick:function(){return e.setState({gameStarted:!e.state.gameStarted})},children:["Start Game"," "]}),Object(f.jsxs)("button",{onClick:function(){return e.showLeaderboards()},children:[" ","Show leaderboards"," "]})]})]})})}}]),a}(s.a.Component),L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,36)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),i(e),c(e)}))};a(35);S.b.initializeApp({apiKey:"AIzaSyAja6ksUMffrx9YEEsJFETzQpRxGxtq7-w",authDomain:"find-waldo-245cb.firebaseapp.com",projectId:"find-waldo-245cb",storageBucket:"find-waldo-245cb.appspot.com",messagingSenderId:"129714425454",appId:"1:129714425454:web:ed1685dbb7e3b65dcda07f",measurementId:"G-Z51LKDCW8W"}),c.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(C,{})}),document.getElementById("root")),L()}},[[34,1,2]]]);
//# sourceMappingURL=main.2c6c281a.chunk.js.map